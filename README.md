# sr
信号2课程项目语音识别与防伪系统

设计一个语音信号识别与防伪系统，能够区分3个同性别声音。要求
(1)用录音软件采集至少3人的语音信号；
(2)分析所采集的时域和频域特征；
(3)给出识别与防伪方法，并给出图示；
(4)能现场对声音进行真假判断。

本项目实现主要方法：
1)	先收集10 个人的声音样本，通过MFCC 来提取这十个人声音的特征，形成10个库（MEL倒谱系数）。
2)	然后录入需要识别的人的声音，用同样的方法提取声音特征，得到声音的MEL倒谱系数。
3)	将待识别语音信号的MEL倒谱系数与库分别进行计算欧式距离
4)	设定阀值，将十个计算得到的欧式距离与阈值进行比较，从而判断是否为本人

原理详述
 

声音预处理原理
1.语音信号分帧：因为语音信号在短时间内是平稳的，为了能够用一些比较传统的方法来对语音信号进行分析，我们需要得到短时的语音信号，所以就引出了语音信号分帧，我们通过对语音信号进行加窗操作来分帧。语音信号通过分帧后，变成了若干帧短时的语音信号。
2.端点检测：
目的是为了检测出有用语音信号的开始和结束，去除静音和噪音部分，既可以减少噪音带来的干扰，也可以降低计算量。
端点检测需要两种方法结合，包括计算短时能量和短时过零率其中:

离散信号的能量计算公式如下：

设第n帧语音信号x^n (m)的短时能量用E_n表示，计算公式为：
 
其中，N为信号帧长。
短时过零率定义如下：
 
通过短时过零率的定义可以算出语音信号的过零次数。而语音信号一般可分为无声段、清音段和浊音段。其中在短时能量方面：无声 < 清音 <<浊音，在短时过零率方面：无声 <浊音 << 清音；所以端点检测就是首先判断有声还是无声, 如果有声,则还可以判断是清音还是浊音。为正确地实现端点检测, 一般综合利用短时能量和过零率两个特征,采用双门限端点检测法。根据信号设置三个阈值：能量阈值，TL，TH；过零率阈值ZCRL、ZCRH，,当某帧信号大于TL或者大于ZCRL时，认为信号的开始、起点，但有可能是时间比较短的噪音，当大于TH或大于ZCRH时，则认为是正式的语音信号，如果保持一段时间，则确认这信号即所需信号。最后我们通过双门限端点检测法检测出有用语音信号的开始和结束，去除静音和噪音部分，既可以减少噪音带来的干扰，也可以降低计算量。
特征参数提取原理
对于特征参数的选取，我们使用mfcc的方法来提取。MFCC参数是基于人的听觉特性利用人听觉的屏蔽效应，在Mel标度频率域提取出来的倒谱特征参数。 
MFCC参数的提取过程如下： 

1. 对输入的语音信号进行分帧、加窗，然后作离散傅立叶变换，获得频谱分布信息。 
设语音信号的DFT为：
 	（1）
其中式中x(n)为输入的语音信号，N表示傅立叶变换的点数。 
2. 再求频谱幅度的平方，得到能量谱。 
3. 将能量谱通过一组Mel尺度的三角形滤波器组。 
我们定义一个有M个滤波器的滤波器组（滤波器的个数和临界带的个数相近），采用的滤波器为三角滤波器，中心频率为f(m),m=1,2,3,···，M（本系统取M=100。）
4. 计算每个滤波器组输出的对数能量。 
     	（2）
其中 为三角滤波器的频率响应。 
5. 经过离散弦变换（DCT）得到MFCC系数。
 	（3）
MFCC系数个数通常取20—30，常常不用0阶倒谱系数，因为它反映的是频谱能量，故在一般识别系统中，将称为能量系数，并不作为倒谱系数，本系统选取20阶倒谱系数。
特征匹配与识别结果
在特征匹配阶段，我们使用了一种基于矢量量化（VQ，Vector Quantization）的特征匹配算法。矢量量化（VQ，Vector Quantization）是一种极其重要的信号压缩方法。VQ在语音信号处理中占十分重要的地位。广泛应用于语音编码、语音识别和语音合成等领域。如图为一个二维VQ的例子：
 
VQ划分示例
在这里，我们用蓝色实线将这张图划分为16个区域。任意的一对数（也就是横轴x和纵轴y组成的任意的一个坐标点(x, y)）都会落到上面这张图中的某一特定区域。然后它就会被该区域的红星的点近似。上面这些红星点就是量化矢量，表示图中的任意一个点都可以量化为这16个矢量中的其中一个，因此我们可以对特征提取阶段得到的Mel频率倒谱系数（MFCC）进行矢量量化为K个红星点。在特征匹配的时候，我们先把样本特征库中的每一个样本的Mel频率倒谱系数（MFCC）都矢量量化为图8所示的二维VQ划分，每个二维VQ划分有K个区域，即有K个红星点，每个区域由该区域的红星点所代替；然后我们把测试样本的Mel频率倒谱系数（MFCC）散步在这张二维VQ划分中，每个区域都会分布若干个点，然后在每个区域中求每个点到红星点的欧式距离，根据公式（4）把K个区域的欧式距离进行求平均，得到平均欧式距离，若某个样本的欧式距离最小，则该训练样本与测试样本特征最匹配，则我们可以判断这个训练样本与该测试样本属于同一语音信号的概率最大，得出识别的结果。
d=√(〖(x_1-x_2)〗^2+〖(y_1-y_2)〗^2 )	（4）

程序结构

 
程序结构图
我们小组项目由三个模块组成：主程序、资源文件、变声程序。
在主程序中，我们实现了采集并存储声音、提取特征、计算识别与防伪、绘制可视化图谱等功能，同时我们增添了一个变声模块。

